# 패션 가드레일 데이터셋 - 상세 문서

이 문서는 데이터셋의 상세 통계, 산업 배경, 확장 이력 등을 포함합니다.

---

## 카테고리별 상세 분포

**총 837 샘플** (Train 671 / Validation 82 / Test 84)

### Unsafe 카테고리 (402 샘플, 48%)

| 카테고리 | Train | Validation | Test | 총계 |
|----------|-------|------------|------|------|
| Wardrobing | 111 | 14 | 10 | 135 |
| Wardrobing Strategy | 64 | 8 | 7 | 79 |
| System Override | 31 | 5 | 5 | 41 |
| Fraud Bypass | 28 | 2 | 3 | 33 |
| Tag Manipulation | 24 | 4 | 3 | 31 |
| False Defect Claim | 24 | 2 | 4 | 30 |
| False Damage Claim | 23 | 3 | 1 | 27 |
| Policy Abuse | 21 | 1 | 4 | 26 |

### Safe 카테고리 (435 샘플, 52%)

| 카테고리 | Train | Validation | Test | 총계 |
|----------|-------|------------|------|------|
| Product Defect | 165 | 26 | 26 | 217 |
| Policy Question | 53 | 6 | 6 | 65 |
| Process Question | 45 | 4 | 5 | 54 |
| General Policy | 44 | 3 | 5 | 52 |
| Edge Case | 38 | 4 | 5 | 47 |

---

## 데이터셋 확장 이력

### 1단계: 원본 데이터셋 (64 샘플)

- 52 train, 6 validation, 6 test
- 모든 샘플에 카테고리 필드 추가

### 2단계: 400 샘플 확장

1. **validation.json 확장**: 6 → 38 샘플 (+32)
2. **test.json 확장**: 6 → 40 샘플 (+34)
3. **train.json 확장**: 52 → 322 샘플 (+270, 5개 배치)
4. **중복 제거**: 분할 간 중복 4개, 내부 중복 1개 제거
5. **최종 조정**: 정확히 400개 달성, 40/60 비율 유지

### 3단계: 837 샘플 확장 (현재)

템플릿 기반 생성 (`scripts/generate_additional_samples.py`) 사용:

1. **카테고리별 템플릿 정의**: 13개 카테고리별 다양한 패턴
2. **변수 조합**: 제품, 상황, 결함 유형 등 조합
3. **품질 검증**: 금지어 체크, 중복 제거
4. **텍스트 변환**: 회사명 일반화 (ABC 회사), 정중한 표현 사용

**확장 결과**:
- Train: 322 → 671 (+349)
- Validation: 38 → 82 (+44)
- Test: 40 → 84 (+44)
- **총계: 400 → 837 (+437)**

### 확장 원칙

1. **다양성**: 각 카테고리별 다양한 표현과 시나리오
2. **현실성**: 실제 고객이 사용할 법한 자연스러운 한국어
3. **균형**: ~48/52 Unsafe/Safe 비율 유지
4. **품질**: 모든 샘플에 적절한 어시스턴트 응답 포함
5. **무중복**: 분할 간, 분할 내 중복 제로

---

## 사용 사례

### 1. 가드레일 모델 훈련

고객 요청이 Safe(AI 에이전트로 전달) 또는 Unsafe(차단 및 거부)인지 예측하는 이진 분류 모델 훈련:

```
입력: 고객의 반품/환불 요청 텍스트
출력: Safe (0) 또는 Unsafe (1)
```

**활용 방식**:
- Fine-tuning: BERT, RoBERTa 등 한국어 사전학습 모델 미세조정
- LLM Fine-tuning: GPT, Claude 등 대형 모델 미세조정
- 분류기: SVM, Random Forest 등 전통적 ML 모델

### 2. 모델 증류 (Knowledge Distillation)

`teacher_response` 필드를 사용하여 대형 모델에서 소형 모델로 지식 전달:

- **Teacher**: 대형 모델 (예: GPT-4, Claude Opus)
- **Student**: Teacher를 모방하도록 훈련된 작고 빠른 모델
- **목적**: 성능은 유지하면서 추론 속도와 비용 절감

### 3. Few-Shot 학습

LLM 프롬프트 엔지니어링을 위한 예시로 샘플 사용:

```python
prompt = f"""
다음은 패션 반품 요청의 예시입니다:

예시 1 (Unsafe):
사용자: {unsafe_example_1}
판단: Unsafe - 착용 후 반품 시도

예시 2 (Safe):
사용자: {safe_example_1}
판단: Safe - 정당한 불량 신고

이제 다음 요청을 판단하세요:
사용자: {new_request}
"""
```

### 4. 평가 벤치마크

홀드아웃 테스트 세트(84 샘플)로 가드레일 모델의 성능 평가:

- **정확도**: 전체 예측 정확도
- **Precision/Recall**: Unsafe 탐지 성능
- **F1-Score**: 균형 지표
- **FPR**: False Positive Rate (정당한 요청 차단 비율)

---

## 향후 개선 사항

### 데이터 확장
- [ ] 더 많은 경계 사례 추가 (해외 주문, 선물 영수증 등)
- [ ] 다중 턴 대화 포함 (고객-상담원 여러 번 주고받기)
- [ ] 실제 고객 데이터로 검증 및 보강
- [ ] 적대적 예시 포함 (정교한 정책 우회 시도)

### 메타데이터 추가
- [ ] 주문 금액 (고가/저가 제품)
- [ ] 고객 이력 (반품 횟수, 가입 기간)
- [ ] 제품 유형 (의류/신발/가방/액세서리)
- [ ] 시즌 정보 (여름/겨울 제품)

### 레이블 확장
- [ ] 경계선 사례에 대한 신뢰도 점수 추가
- [ ] 다중 레이블 (여러 정책 위반 유형 동시 포함)
- [ ] 심각도 수준 (경미/중간/심각)

### 다국어 지원
- [ ] 영어 번역 및 검증
- [ ] 일본어 번역 (일본 패션 시장)
- [ ] 중국어 번역 (중국 이커머스 시장)

### 평가 강화
- [ ] 인간 평가자에 의한 레이블 검증
- [ ] Inter-annotator agreement 측정
- [ ] 모델 성능 벤치마크 공개

---

## 기술적 세부사항

### 파일 형식

- **인코딩**: UTF-8
- **형식**: JSON (배열)
- **줄바꿈**: Unix (LF)
- **들여쓰기**: 2 스페이스

### 품질 보증

- ✅ 중복 제로: 훈련/검증/테스트 간 중복 없음
- ✅ 완전한 필드: 837개 샘플 모두 필수 필드 보유
- ✅ 레이블 균형: 48% Unsafe / 52% Safe
- ✅ 카테고리 커버리지: 13개 카테고리 모두 포함
- ✅ 한국어: 100% 한국어, 적절한 존댓말 사용
- ✅ 금지어 없음: "사기", "허위", "부정한" 등 부정적 표현 제거

---

## 라이선스 및 사용 제한

이 데이터셋은 연구 및 개발 목적으로 제공됩니다.

### 허용 사용
- 학술 연구
- 가드레일 모델 개발
- 부정 반품 탐지 시스템 훈련
- 벤치마크 평가

### 금지 사용
- 부정 행위 교육 또는 조장
- 개인정보 침해
- 상업적 재판매 (모델 학습은 허용)

---

**최종 업데이트**: 2026년 1월
